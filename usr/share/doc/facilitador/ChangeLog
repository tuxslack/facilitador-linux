

# ----------------------------------------------------------------------------------------

20/10/2025 - Fernando 

Teste realizado no Void Linux 64 bit.


Ao instalar o pacote não aparece esses ícones no menu do xfce mesmo se reiniciar a sessão 
do usuário:

/usr/share/applications/facilitador.desktop
/usr/share/applications/CobrancaCaixa.desktop
/usr/share/applications/sintegra.desktop
/usr/share/applications/sva.desktop
/usr/share/applications/calima-app-local.desktop
/usr/share/applications/linphone.desktop

Obs: Os demais arquivos .desktop vão para as categorias Internet e Outros.

Os arquivos .sh estão marcados como executáveis.

Verificar se é má formação nos arquivos .desktop.


$ ls -l /usr/local/bin/ | grep out
-rwxr-xr-x 1 root root   749 out 20 17:40 DIRF.sh
-rwxr-xr-x 1 root root   570 out 20 17:40 IRPF.sh
-rwxr-xr-x 1 root root  4896 out 20 17:40 contabil.sh
-rwxr-xr-x 1 root root  1154 out 20 17:40 efd-icms-ipi.sh
-rwxr-xr-x 1 root root  4967 out 20 17:40 facilitador.sh
-rwxr-xr-x 1 root root 20132 out 20 17:40 fiscal.sh
-rwxr-xr-x 1 root root  4538 out 20 17:40 folha.sh
-rwxr-xr-x 1 root root 12444 out 20 17:40 funcoes.sh
-rwxr-xr-x 1 root root   933 out 20 17:40 linphone.sh
-rwxr-xr-x 1 root root  7620 out 20 17:40 projetus.sh
-rwxr-xr-x 1 root root  1213 out 20 17:40 sped-ecd.sh
-rwxr-xr-x 1 root root  1156 out 20 17:40 sped-ecf.sh
-rwxr-xr-x 1 root root  1332 out 20 17:40 sped-efd-contribuicoes.sh
-rw-r--r-- 1 root root  4562 out 20 17:40 updater.sh


$ sudo xbps-install -Sy wine
[*] Updating repository `https://repo-default.voidlinux.org/current/x86_64-repodata' ...
x86_64-repodata: 2026KB [avg rate: 93KB/s]
[*] Updating repository `https://repo-default.voidlinux.org/current/multilib/x86_64-repodata' ...
x86_64-repodata: 690KB [avg rate: 11GB/s]
[*] Updating repository `https://repo-default.voidlinux.org/current/nonfree/x86_64-repodata' ...
x86_64-repodata: 14KB [avg rate: 236MB/s]

Name           Action    Version           New version            Download size
wine-common    install   -                 10.17_1                2543KB 
glib           update    2.84.0_2          2.86.0_1               3398KB 
libxkbregistry install   -                 1.12.0_1               14KB 
wine           install   -                 10.17_1                166MB 

Size to download:              172MB
Size required on disk:         829MB
Space available on disk:      3610MB


[*] Downloading packages
wine-common-10.17_1.x86_64.xbps.sig2: 512B [avg rate: 14MB/s]
...


Criado o arquivo .conf 

/etc/facilitador.conf


Testado a instalação do SPED ECD (SpedContabil_linux_x86_64-10.3.3.sh) - erro ao abrir no Void Linux

Testado a instalação do Sped ECF (SpedECF_linux_x86_64-11.3.4.sh) usando a pasta /opt/ProgramasSPED/SpedECF falta fonte Arial do windows no Void Linux

Testado a instalação do Receita Net BX (ReceitanetBX-1.9.24.exe)


$ wine ReceitanetBX-1.9.24.exe
it looks like wine-32bit is missing, you should install it.
the multilib repository needs to be enabled first.  as root, please
execute "xbps-install -S void-repo-multilib && xbps-install -S wine-32bit"
002c:err:winediag:getaddrinfo Failed to resolve your host name IP
0128:err:environ:init_peb starting L"Z:\\opt\\projetus\\facilitador\\cache\\ReceitanetBX-1.9.24.exe" in experimental wow64 mode
wine: failed to load L"\\??\\C:\\windows\\syswow64\\ntdll.dll" error c0000135
O aplicativo não pôde ser iniciado ou não existe aplicativo associado ao arquivo
 especificado.
ShellExecuteEx falhou: 0024:err:start:fatal_error FormatMessage failed


O erro wine: failed to load L"\\??\\C:\\windows\\syswow64\\ntdll.dll" error c0000135 indica 
que o Wine não conseguiu carregar um arquivo necessário para a execução do programa.


$ wine ReceitanetBX-1.9.24.exe
002c:err:winediag:getaddrinfo Failed to resolve your host name IP
wine: could not load kernel32.dll, status c0000135


O erro wine: could not load kernel32.dll, status c0000135 indica que o Wine não conseguiu localizar o arquivo kernel32.dll, que é uma das bibliotecas principais do Windows, e isso geralmente acontece quando há problemas com a configuração do Wine, como a falta de um prefixo correto ou a ausência de bibliotecas necessárias.

Já o erro 002c:err:winediag:getaddrinfo Failed to resolve your host name IP sugere um problema com a resolução de DNS no Wine, que pode estar relacionado a configurações de rede ou de ambiente no seu sistema.


Não funcionou

WINEPREFIX=~/.wine32 winecfg


$ wineserver: could not save registry branch to system.reg : No space left on device
wineserver: could not save registry branch to userdef.reg : No space left on device
wineserver: could not save registry branch to user.reg : No space left on device


O erro No space left on device que você está recebendo no Wine significa que o seu sistema está sem espaço livre no disco. O Wine tenta salvar as configurações do registro (system.reg, user.reg e userdef.reg) no diretório do seu prefixo Wine e não consegue, porque não há espaço disponível no dispositivo onde essas configurações são armazenadas.

Verificar o espaço disponível no disco

Primeiro, verifique quanto espaço livre você tem no disco. Use o comando df para ver a utilização do espaço de disco:

df -h


rm -Rf ~/.wine*


# Feche todos os processos do Wine
wineserver -k



Soluções para o erro kernel32.dll

Solução 1: Criar um novo prefixo Wine

Um prefixo Wine é um diretório onde o Wine armazena seu "C: drive" e outras configurações necessárias. Se o seu prefixo atual estiver corrompido, o Wine não será capaz de localizar os arquivos essenciais como o kernel32.dll.


WINEPREFIX=~/.wine32 winecfg



$ file ReceitanetBX-1.9.24.exe 
ReceitanetBX-1.9.24.exe: PE32 executable for MS Windows 4.00 (GUI), Intel i386 (stripped to external PDB), PECompact2 compressed, 2 sections


# Configurar Wine para usar um prefixo de 32-bit
WINEARCH=win32 WINEPREFIX=~/.wine32 winecfg



rm -Rf ~/.wine*


$ wine ReceitanetBX-1.9.24.exe
wine: created the configuration directory '/home/anon/.wine'
004c:err:ole:StdMarshalImpl_MarshalInterface Failed to create ifstub, hr 0x80004002
004c:err:ole:CoMarshalInterface Failed to marshal the interface {6d5140c1-7436-11ce-8034-00aa006009fa}, hr 0x80004002
004c:err:ole:apartment_get_local_server_stream Failed: 0x80004002
004c:err:ole:start_rpcss Failed to open RpcSs service
0054:err:ole:StdMarshalImpl_MarshalInterface Failed to create ifstub, hr 0x80004002
0054:err:ole:CoMarshalInterface Failed to marshal the interface {6d5140c1-7436-11ce-8034-00aa006009fa}, hr 0x80004002
0054:err:ole:apartment_get_local_server_stream Failed: 0x80004002
009c:err:msi:extract_cabinet_stream FDICopy failed
009c:err:msi:ACTION_InstallFiles Failed to extract cabinet: L"#image.cab"
009c:err:msi:execute_script Execution of script 0 halted; action L"InstallFiles" returned 1603
009c:err:msi:ITERATE_Actions Execution halted, action L"InstallFinalize" returned 1603
009c:err:appwizcpl:install_file MsiInstallProduct failed: 1603
002c:err:setupapi:do_file_copyW Unsupported style(s) 0x10
002c:err:setupapi:do_file_copyW Unsupported style(s) 0x10
0114:err:setupapi:do_file_copyW Unsupported style(s) 0x10
002c:err:setupapi:do_file_copyW Unsupported style(s) 0x10
0114:err:setupapi:do_file_copyW Unsupported style(s) 0x10


Criado os arquivos:

/usr/share/applications/govbr.desktop
/usr/share/applications/Consultar-NF-e.desktop
/usr/share/applications/IRPF-online.desktop


# ----------------------------------------------------------------------------------------


